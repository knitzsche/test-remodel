name: test-snapdapi
base: core18
version: '1'
summary: test a remodel
description: Remodel from the snapd api

grade: devel
confinement: strict

apps:
  model:
    command: bin/model
    plugs: [ snapd-control, network, system-backup ]
  remodel:
    command: bin/remodel
    plugs: [ snapd-control, network, system-backup, home ]
  snap:
    command: bin/snap
    plugs: [ snapd-control, network, system-backup ]
  updates-neeeded:
    command: bin/updates-needed
    plugs: [ snapd-control, network, system-backup ]
  list:
    command: bin/list
    plugs: [ snapd-control, network, system-backup ]
# system-backup now seems needed to use snapd-control 
# see https://forum.snapcraft.io/t/possibly-missing-apparmor-network-permission/15054/

parts:
  snapdapi:
    source: .
    plugin: go
    go-importpath: github.com/knitzsche/test-remodel
    build-packages: [ gcc ]
